<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ± ì¶¤ì¶”ëŠ” ê³ ì–‘ì´ë“¤ ğŸ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        /* ë””ìŠ¤ì½” ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes discoBackground {
            0% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            25% { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
            50% { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
            75% { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
            100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        }

        body.disco-mode {
            animation: discoBackground 3s ease-in-out infinite;
        }

        /* ë””ìŠ¤ì½” ë¼ì´íŠ¸ ì»¨í…Œì´ë„ˆ */
        .disco-lights {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* ë°°ê²½ ê³ ì–‘ì´ íš¨ê³¼ */
        .background-cat {
            position: fixed;
            font-size: 20em;
            opacity: 0;
            pointer-events: none;
            z-index: 0;
            animation: catFlash 0.8s ease-out forwards;
        }

        @keyframes catFlash {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5) rotate(0deg);
            }
            30% {
                opacity: 0.3;
                transform: translate(-50%, -50%) scale(1.2) rotate(10deg);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.5) rotate(20deg);
            }
        }

        .disco-light {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            filter: blur(40px);
            animation: discoLightPulse 2s ease-in-out infinite;
        }

        @keyframes discoLightPulse {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 0.6; transform: scale(1.5); }
        }

        /* ë””ìŠ¤ì½”ë³¼ íš¨ê³¼ */
        .disco-ball {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background:
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), transparent 50%),
                linear-gradient(45deg, #ff00ff 0%, #00ffff 25%, #ffff00 50%, #ff00ff 75%, #00ffff 100%);
            box-shadow:
                0 0 30px rgba(255,255,255,0.5),
                inset 0 0 20px rgba(0,0,0,0.3);
            animation: rotateBall 4s linear infinite;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .disco-ball:hover {
            transform: scale(1.1);
            box-shadow: 0 0 40px rgba(255,255,255,0.8), inset 0 0 20px rgba(0,0,0,0.3);
        }

        body.disco-mode .disco-ball {
            box-shadow: 0 0 50px rgba(255,255,255,0.9), inset 0 0 20px rgba(0,0,0,0.3);
        }

        @keyframes rotateBall {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .disco-ball:hover {
            animation: rotateBall 2s linear infinite;
        }

        /* ëª¨ë“  ì»¨í…ì¸ ê°€ ì¡°ëª… ìœ„ì— í‘œì‹œë˜ë„ë¡ */
        h1, .controls, .stage {
            position: relative;
            z-index: 10;
        }

        h1 {
            margin: 20px 0;
            font-size: 3em;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }

        .controls {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 200px;
        }

        label {
            font-weight: bold;
            font-size: 1.1em;
        }

        select, input[type="range"], input[type="number"] {
            padding: 10px;
            border-radius: 10px;
            border: none;
            font-size: 1em;
            background: white;
            color: #333;
        }

        input[type="range"] {
            width: 100%;
        }

        .value-display {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.3);
            padding: 5px;
            border-radius: 8px;
        }

        .stage {
            width: 100%;
            max-width: 1200px;
            min-height: 400px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            display: flex;
            flex-wrap: wrap;
            gap: 50px;
            justify-content: center;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .cat {
            font-size: 5em;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .cat:hover {
            transform: scale(1.1);
        }

        /* ìŒˆë°”ì¶¤ - ì¢Œìš° í”ë“¤ê¸° */
        @keyframes samba {
            0%, 100% { transform: translateX(-20px) rotate(-10deg); }
            50% { transform: translateX(20px) rotate(10deg); }
        }

        /* íƒ­ëŒ„ìŠ¤ - ìœ„ì•„ë˜ ì í”„ */
        @keyframes tap {
            0%, 100% { transform: translateY(0) scaleY(1); }
            25% { transform: translateY(-30px) scaleY(1.1); }
            50% { transform: translateY(0) scaleY(0.9); }
            75% { transform: translateY(-15px) scaleY(1.05); }
        }

        /* ì›¨ì´ë¸Œ - ë¬¼ê²°ì¹˜ë“¯ ì›€ì§ì´ê¸° */
        @keyframes wave {
            0% { transform: rotate(0deg) translateY(0); }
            25% { transform: rotate(20deg) translateY(-20px); }
            50% { transform: rotate(0deg) translateY(0); }
            75% { transform: rotate(-20deg) translateY(-20px); }
            100% { transform: rotate(0deg) translateY(0); }
        }

        /* íŒí•€ - ê¸‰ê²©í•œ ì›€ì§ì„ */
        @keyframes poppin {
            0%, 100% { transform: scale(1) rotate(0deg); }
            10% { transform: scale(1.3) rotate(5deg); }
            20% { transform: scale(1) rotate(0deg); }
            30% { transform: scale(1.3) rotate(-5deg); }
            40% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            60% { transform: scale(1) rotate(0deg); }
        }

        /* í™í•© - ì¢Œìš° ìŠ¤ìœ™ */
        @keyframes hiphop {
            0%, 100% { transform: rotate(-15deg) translateX(-15px); }
            25% { transform: rotate(15deg) translateX(15px) scale(1.1); }
            50% { transform: rotate(-15deg) translateX(-15px); }
            75% { transform: rotate(15deg) translateX(15px) scale(0.9); }
        }

        /* ì™í‚¹ - íŒ” íœ˜ë‘ë¥´ê¸° */
        @keyframes waacking {
            0% { transform: rotate(-45deg) translateX(-30px); }
            12.5% { transform: rotate(45deg) translateX(30px) scale(1.15); }
            25% { transform: rotate(-30deg) translateX(-20px) scale(1.05); }
            37.5% { transform: rotate(60deg) translateX(25px) scale(1.1); }
            50% { transform: rotate(-45deg) translateX(-30px); }
            62.5% { transform: rotate(30deg) translateX(20px) scale(1.2); }
            75% { transform: rotate(-60deg) translateX(-25px) scale(0.95); }
            87.5% { transform: rotate(45deg) translateX(30px) scale(1.1); }
            100% { transform: rotate(-45deg) translateX(-30px); }
        }

        .dance-samba { animation: samba var(--speed) ease-in-out infinite; }
        .dance-tap { animation: tap var(--speed) ease-in-out infinite; }
        .dance-wave { animation: wave var(--speed) ease-in-out infinite; }
        .dance-poppin { animation: poppin var(--speed) linear infinite; }
        .dance-hiphop { animation: hiphop var(--speed) ease-in-out infinite; }
        .dance-waacking { animation: waacking var(--speed) ease-in-out infinite; }

        /* ê³ ì–‘ì´ ì»¨í…Œì´ë„ˆ (ì† í¬í•¨) */
        .cat-container {
            position: relative;
            display: inline-block;
        }

        .cat-with-arms {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        /* ìŠ¤í¬íŠ¸ë¼ì´íŠ¸ íš¨ê³¼ */
        .spotlight {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.2) 30%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
            animation: spotlightPulse 2s ease-in-out infinite;
            display: none;
        }

        body.disco-mode .spotlight {
            display: block;
        }

        @keyframes spotlightPulse {
            0%, 100% {
                opacity: 0.6;
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                opacity: 0.9;
                transform: translate(-50%, -50%) scale(1.1);
            }
        }

        .arm {
            font-size: 3em;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            transition: opacity 0.3s ease;
        }

        .arm.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .arm.left {
            left: -50px;
            animation: armWaveLeft var(--speed) ease-in-out infinite;
        }

        .arm.right {
            right: -50px;
            animation: armWaveRight var(--speed) ease-in-out infinite;
        }

        @keyframes armWaveLeft {
            0%, 100% { transform: translateY(-50%) rotate(-90deg); }
            25% { transform: translateY(-80%) rotate(-45deg); }
            50% { transform: translateY(-50%) rotate(0deg); }
            75% { transform: translateY(-20%) rotate(-135deg); }
        }

        @keyframes armWaveRight {
            0%, 100% { transform: translateY(-50%) rotate(90deg); }
            25% { transform: translateY(-20%) rotate(135deg); }
            50% { transform: translateY(-50%) rotate(180deg); }
            75% { transform: translateY(-80%) rotate(45deg); }
        }

        /* ëŒ€ì™• ê³ ì–‘ì´ ìŠ¤íƒ€ì¼ */
        .king-cat-container {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            transform: scale(1.5);
        }

        .king-cat {
            font-size: 5em;
            cursor: pointer;
            transition: transform 0.1s;
            position: relative;
        }

        .crown {
            position: absolute;
            font-size: 0.5em;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            animation: crownFloat 2s ease-in-out infinite;
        }

        @keyframes crownFloat {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        .king-cat-container .arm {
            font-size: 4em;
        }

        .king-cat-container .arm.left {
            left: -70px;
        }

        .king-cat-container .arm.right {
            right: -70px;
        }

        button {
            padding: 15px 30px;
            border-radius: 10px;
            border: none;
            font-size: 1.2em;
            font-weight: bold;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        button:active {
            transform: translateY(0);
        }

        button.playing {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

    </style>
</head>
<body>
    <div class="disco-lights" id="disco-lights"></div>

    <h1>ğŸµ ì¶¤ì¶”ëŠ” ê³ ì–‘ì´ë“¤ ğŸµ</h1>

    <div class="controls">
        <div class="control-group">
            <label for="dance-style">ì¶¤ ìŠ¤íƒ€ì¼</label>
            <select id="dance-style">
                <option value="samba">ìŒˆë°”ì¶¤ ğŸ’ƒ</option>
                <option value="tap">íƒ­ëŒ„ìŠ¤ ğŸ‘Ÿ</option>
                <option value="wave">ì›¨ì´ë¸Œ ğŸŒŠ</option>
                <option value="poppin">íŒí•€ âš¡</option>
                <option value="hiphop">í™í•© ğŸ¤</option>
                <option value="waacking">ì™í‚¹ ğŸ‘‹</option>
            </select>
        </div>

        <div class="control-group">
            <label for="speed">ì†ë„ (1-10)</label>
            <input type="range" id="speed" min="1" max="10" value="5">
            <div class="value-display" id="speed-value">5</div>
        </div>

        <div class="control-group">
            <label for="cat-count">ê³ ì–‘ì´ ìˆ˜</label>
            <input type="number" id="cat-count" min="1" max="20" value="5">
        </div>

        <div class="control-group">
            <label>ìŒì•…</label>
            <button id="music-toggle">ğŸµ ìŒì•… ì‹œì‘</button>
        </div>

        <div class="control-group">
            <label for="volume">ìŒëŸ‰</label>
            <input type="range" id="volume" min="0" max="100" value="50">
            <div class="value-display" id="volume-value">50</div>
        </div>

        <div class="control-group">
            <label>ëŒ€ì™• ê³ ì–‘ì´</label>
            <div class="disco-ball" id="disco-ball" title="í´ë¦­í•˜ë©´ ëŒ€ì™• ê³ ì–‘ì´ ì†Œí™˜!"></div>
        </div>
    </div>

    <div class="stage" id="stage"></div>

    <script>
        const danceStyleSelect = document.getElementById('dance-style');
        const speedRange = document.getElementById('speed');
        const speedValue = document.getElementById('speed-value');
        const catCountInput = document.getElementById('cat-count');
        const musicToggle = document.getElementById('music-toggle');
        const volumeRange = document.getElementById('volume');
        const volumeValue = document.getElementById('volume-value');
        const stage = document.getElementById('stage');
        const discoLightsContainer = document.getElementById('disco-lights');
        const discoBall = document.getElementById('disco-ball');

        let currentDance = 'samba';
        let currentSpeed = 5;
        let catCount = 5;
        let isPlaying = false;
        let discoLightInterval = null;
        let kingCatActive = false;

        // Web Audio API ì„¤ì •
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let gainNode = audioContext.createGain();
        gainNode.connect(audioContext.destination);
        gainNode.gain.value = 0.5;

        let musicInterval = null;

        // ë””ìŠ¤ì½” ë¼ì´íŠ¸ ìƒì„± í•¨ìˆ˜
        function createDiscoLight() {
            const light = document.createElement('div');
            light.className = 'disco-light';

            // ë¬´ì‘ìœ„ ìœ„ì¹˜
            light.style.left = Math.random() * 100 + '%';
            light.style.top = Math.random() * 100 + '%';

            // ë¬´ì‘ìœ„ í¬ê¸°
            const size = 100 + Math.random() * 200;
            light.style.width = size + 'px';
            light.style.height = size + 'px';

            // ë¬´ì‘ìœ„ ìƒ‰ìƒ
            const colors = [
                'rgba(255, 0, 255, 0.6)',
                'rgba(0, 255, 255, 0.6)',
                'rgba(255, 255, 0, 0.6)',
                'rgba(255, 0, 0, 0.6)',
                'rgba(0, 255, 0, 0.6)',
                'rgba(0, 100, 255, 0.6)'
            ];
            light.style.background = colors[Math.floor(Math.random() * colors.length)];

            // ë¬´ì‘ìœ„ ì• ë‹ˆë©”ì´ì…˜ ì§€ì†ì‹œê°„
            light.style.animationDuration = (1 + Math.random() * 2) + 's';
            light.style.animationDelay = Math.random() * 0.5 + 's';

            discoLightsContainer.appendChild(light);

            // 3ì´ˆ í›„ ì œê±°
            setTimeout(() => {
                light.remove();
            }, 3000);
        }

        // ë””ìŠ¤ì½” ëª¨ë“œ ì‹œì‘
        function startDiscoMode() {
            document.body.classList.add('disco-mode');
            discoLightInterval = setInterval(createDiscoLight, 300);
        }

        // ë””ìŠ¤ì½” ëª¨ë“œ ì •ì§€
        function stopDiscoMode() {
            document.body.classList.remove('disco-mode');
            if (discoLightInterval) {
                clearInterval(discoLightInterval);
                discoLightInterval = null;
            }
            // ëª¨ë“  ë¼ì´íŠ¸ ì œê±°
            discoLightsContainer.innerHTML = '';
        }

        // ë°°ê²½ ê³ ì–‘ì´ íš¨ê³¼ ìƒì„±
        function createBackgroundCat() {
            const catEmojis = ['ğŸ±', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½', 'ğŸ™€', 'ğŸ˜¿', 'ğŸ˜¾'];
            const bgCat = document.createElement('div');
            bgCat.className = 'background-cat';
            bgCat.textContent = catEmojis[Math.floor(Math.random() * catEmojis.length)];

            // ë¬´ì‘ìœ„ ìœ„ì¹˜
            bgCat.style.left = (20 + Math.random() * 60) + '%';
            bgCat.style.top = (20 + Math.random() * 60) + '%';

            document.body.appendChild(bgCat);

            // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ ì œê±°
            setTimeout(() => {
                bgCat.remove();
            }, 800);
        }

        // ë¹„íŠ¸ ì‚¬ìš´ë“œ ìƒì„± í•¨ìˆ˜
        function playBeat(frequency, duration, type = 'sine') {
            const oscillator = audioContext.createOscillator();
            const beatGain = audioContext.createGain();

            oscillator.connect(beatGain);
            beatGain.connect(gainNode);

            oscillator.frequency.value = frequency;
            oscillator.type = type;

            beatGain.gain.setValueAtTime(0.3, audioContext.currentTime);
            beatGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);

            // ë¹„íŠ¸ì— ë§ì¶° ë°°ê²½ ê³ ì–‘ì´ íš¨ê³¼ (ìŒì•…ì´ ì¬ìƒ ì¤‘ì¼ ë•Œë§Œ)
            if (isPlaying) {
                createBackgroundCat();
            }
        }

        // ê° ì¶¤ ìŠ¤íƒ€ì¼ë³„ ìŒì•… íŒ¨í„´
        function getMusicPattern(danceStyle) {
            const patterns = {
                samba: {
                    beats: [[200, 0.1], [150, 0.1], [200, 0.1], [180, 0.15]],
                    interval: 400,
                    type: 'triangle'
                },
                tap: {
                    beats: [[300, 0.05], [400, 0.05], [300, 0.05], [350, 0.1]],
                    interval: 300,
                    type: 'square'
                },
                wave: {
                    beats: [[250, 0.2], [200, 0.2], [300, 0.2], [180, 0.2]],
                    interval: 500,
                    type: 'sine'
                },
                poppin: {
                    beats: [[350, 0.05], [400, 0.05], [300, 0.1], [450, 0.05]],
                    interval: 250,
                    type: 'sawtooth'
                },
                hiphop: {
                    beats: [[100, 0.15], [150, 0.1], [120, 0.15], [180, 0.1]],
                    interval: 450,
                    type: 'triangle'
                },
                waacking: {
                    beats: [[280, 0.08], [320, 0.08], [280, 0.08], [350, 0.12], [300, 0.08]],
                    interval: 200,
                    type: 'sawtooth'
                }
            };
            return patterns[danceStyle];
        }

        // ìŒì•… ì‹œì‘
        function startMusic() {
            if (musicInterval) return;

            audioContext.resume();
            const pattern = getMusicPattern(currentDance);
            let beatIndex = 0;

            // ì†ë„ì— ë”°ë¼ ìŒì•… í…œí¬ ì¡°ì ˆ
            const speedMultiplier = 2.0 / (currentSpeed / 5);
            const adjustedInterval = pattern.interval * speedMultiplier;

            musicInterval = setInterval(() => {
                const [frequency, duration] = pattern.beats[beatIndex];
                playBeat(frequency, duration, pattern.type);
                beatIndex = (beatIndex + 1) % pattern.beats.length;
            }, adjustedInterval);
        }

        // ìŒì•… ì¤‘ì§€
        function stopMusic() {
            if (musicInterval) {
                clearInterval(musicInterval);
                musicInterval = null;
            }
        }

        // ì†ë„ë¥¼ ì• ë‹ˆë©”ì´ì…˜ ì§€ì†ì‹œê°„ìœ¼ë¡œ ë³€í™˜ (10ë‹¨ê³„ê°€ ê°€ì¥ ë¹ ë¦„)
        function getAnimationDuration(speed) {
            // ì†ë„ 1 = 2ì´ˆ, ì†ë„ 10 = 0.1ì´ˆ (ë¯¸ì¹œë“¯ì´ ë¹ ë¦„)
            const durations = [2, 1.7, 1.4, 1.1, 0.8, 0.6, 0.4, 0.3, 0.15, 0.1];
            return durations[speed - 1] + 's';
        }

        // ê³ ì–‘ì´ë“¤ ìƒì„±
        function createCats() {
            stage.innerHTML = '';
            const catEmojis = ['ğŸ±', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½', 'ğŸ™€', 'ğŸ˜¿', 'ğŸ˜¾'];

            for (let i = 0; i < catCount; i++) {
                // ëª¨ë“  ê³ ì–‘ì´ì—ê²Œ ì† ë‹¬ì•„ì£¼ê¸°
                const container = document.createElement('div');
                container.className = 'cat-with-arms';
                container.style.setProperty('--speed', getAnimationDuration(currentSpeed));

                // ìŠ¤í¬íŠ¸ë¼ì´íŠ¸ ì¶”ê°€
                const spotlight = document.createElement('div');
                spotlight.className = 'spotlight';

                const leftArm = document.createElement('div');
                leftArm.className = 'arm left hidden'; // ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€
                leftArm.textContent = 'ğŸ‘‹';
                leftArm.style.setProperty('--speed', getAnimationDuration(currentSpeed));

                const cat = document.createElement('div');
                cat.className = 'cat dance-' + currentDance;
                cat.textContent = catEmojis[i % catEmojis.length];
                cat.style.setProperty('--speed', getAnimationDuration(currentSpeed));
                cat.style.animationDelay = (i * 0.1) + 's';

                const rightArm = document.createElement('div');
                rightArm.className = 'arm right hidden'; // ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€
                rightArm.textContent = 'ğŸ‘‹';
                rightArm.style.setProperty('--speed', getAnimationDuration(currentSpeed));

                // í´ë¦­í•˜ë©´ ì† í† ê¸€
                container.addEventListener('click', () => {
                    leftArm.classList.toggle('hidden');
                    rightArm.classList.toggle('hidden');
                });

                container.appendChild(spotlight);
                container.appendChild(leftArm);
                container.appendChild(cat);
                container.appendChild(rightArm);
                stage.appendChild(container);
            }
        }

        // ì¶¤ ìŠ¤íƒ€ì¼ ë³€ê²½
        danceStyleSelect.addEventListener('change', (e) => {
            currentDance = e.target.value;
            createCats();

            // ìŒì•…ì´ ì¬ìƒ ì¤‘ì´ë©´ ìƒˆ ìŠ¤íƒ€ì¼ë¡œ ì¬ì‹œì‘
            if (isPlaying) {
                stopMusic();
                startMusic();
            }
        });

        // ì†ë„ ë³€ê²½
        speedRange.addEventListener('input', (e) => {
            currentSpeed = parseInt(e.target.value);
            speedValue.textContent = currentSpeed;
            createCats();

            // ìŒì•…ì´ ì¬ìƒ ì¤‘ì´ë©´ ìƒˆ ì†ë„ë¡œ ì¬ì‹œì‘
            if (isPlaying) {
                stopMusic();
                startMusic();
            }
        });

        // ê³ ì–‘ì´ ìˆ˜ ë³€ê²½
        catCountInput.addEventListener('input', (e) => {
            catCount = Math.max(1, Math.min(20, parseInt(e.target.value) || 1));
            catCountInput.value = catCount;
            createCats();
        });

        // ìŒì•… í† ê¸€
        musicToggle.addEventListener('click', () => {
            isPlaying = !isPlaying;

            if (isPlaying) {
                startMusic();
                startDiscoMode();
                musicToggle.textContent = 'ğŸ”‡ ìŒì•… ì •ì§€';
                musicToggle.classList.add('playing');
            } else {
                stopMusic();
                stopDiscoMode();
                musicToggle.textContent = 'ğŸµ ìŒì•… ì‹œì‘';
                musicToggle.classList.remove('playing');
            }
        });

        // ë³¼ë¥¨ ì¡°ì ˆ
        volumeRange.addEventListener('input', (e) => {
            const volume = parseInt(e.target.value);
            volumeValue.textContent = volume;
            gainNode.gain.value = volume / 100;
        });

        // ì´ˆê¸° ê³ ì–‘ì´ë“¤ ìƒì„±
        createCats();
    </script>
</body>
</html>
